{"version":3,"file":"portal-target.js","sources":["../../src/components/portal-target.ts"],"sourcesContent":["import Component from '@glimmer/component';\nimport { modifier } from 'ember-modifier';\nimport { service } from '@ember/service';\nimport { assert } from '@ember/debug';\nimport type PortalService from '../services/-portal';\n\nexport interface PortalTargetSignature {\n  Element: HTMLDivElement;\n  Args: {\n    name: string;\n    multiple?: boolean;\n    onChange?: (count: number) => void;\n  };\n  Blocks: { default: [number] };\n}\n\nexport default class PortalTarget extends Component<PortalTargetSignature> {\n  @service('-portal')\n  portalService!: PortalService;\n\n  register = modifier((element) => {\n    assert('PortalTargets needs a name', this.args.name);\n    const options = {\n      multiple: this.args.multiple,\n      onChange: this.args.onChange,\n    };\n    this.portalService.registerTarget(this.args.name, element, options);\n\n    return (): void => this.portalService.unregisterTarget(this.args.name);\n  });\n\n  get count(): number {\n    return this.portalService.getPortalCount(this.args.name);\n  }\n}\n"],"names":["PortalTarget","Component","g","prototype","service","i","void 0","register","modifier","element","assert","args","name","options","multiple","onChange","portalService","registerTarget","unregisterTarget","count","getPortalCount","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;;;AAgBe,MAAMA,YAAY,SAASC,SAAS,CAAwB;AAAA,EAAA;AAAAC,IAAAA,CAAA,MAAAC,SAAA,EAAA,eAAA,EAAA,CACxEC,OAAO,CAAC,SAAS,CAAC,CAAA,CAAA;AAAA;AAAA,EAAA,cAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,eAAA,CAAA,EAAAC,MAAA;AAGnBC,EAAAA,QAAQ,GAAGC,QAAQ,CAAEC,OAAO,IAAK;IAC/BC,MAAM,CAAC,4BAA4B,EAAE,IAAI,CAACC,IAAI,CAACC,IAAI,CAAC;AACpD,IAAA,MAAMC,OAAO,GAAG;AACdC,MAAAA,QAAQ,EAAE,IAAI,CAACH,IAAI,CAACG,QAAQ;AAC5BC,MAAAA,QAAQ,EAAE,IAAI,CAACJ,IAAI,CAACI;KACrB;AACD,IAAA,IAAI,CAACC,aAAa,CAACC,cAAc,CAAC,IAAI,CAACN,IAAI,CAACC,IAAI,EAAEH,OAAO,EAAEI,OAAO,CAAC;AAEnE,IAAA,OAAO,MAAY,IAAI,CAACG,aAAa,CAACE,gBAAgB,CAAC,IAAI,CAACP,IAAI,CAACC,IAAI,CAAC;AACxE,EAAA,CAAC,CAAC;EAEF,IAAIO,KAAKA,GAAW;IAClB,OAAO,IAAI,CAACH,aAAa,CAACI,cAAc,CAAC,IAAI,CAACT,IAAI,CAACC,IAAI,CAAC;AAC1D,EAAA;AACF;AAACS,oBAAA,CAAAC,QAAA,EAlBoBtB,YAAY,CAAA;;;;"}